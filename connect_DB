import oracledb
import os

# --- KONFIGURACJA ---
# Dane znajdziesz w pliku tnsnames.ora wewnƒÖtrz rozpakowanego portfela
DB_USER = ""
DB_PASSWORD = ""
DB_DSN = ""
WALLET_PATH = r""
WALLET_PASSWORD = ""

def test_oracle_connection():
    connection = None
    try:
        print("Inicjalizacja po≈ÇƒÖczenia...")
        # Wskazujemy ≈õcie≈ºkƒô do portfela i has≈Ço do niego
        connection = oracledb.connect(
            user=DB_USER,
            password=DB_PASSWORD,
            dsn=DB_DSN,
            config_dir=WALLET_PATH,
            wallet_location=WALLET_PATH,
            wallet_password=WALLET_PASSWORD
        )

        print("‚úÖ Sukces! Po≈ÇƒÖczono z Oracle Cloud.")

        # Testowe zapytanie
        cursor = connection.cursor()
        cursor.execute("SELECT 'Wersja bazy: ' || version FROM v$instance")
        result = cursor.fetchone()
        
        print(f"üìä Wynik testu: {result[0]}")

    except Exception as e:
        print(f"‚ùå B≈ÇƒÖd podczas ≈ÇƒÖczenia: {e}")
    
    finally:
        # Zamkniƒôcie po≈ÇƒÖczenia
        if connection:
            connection.close()
            print("Po≈ÇƒÖczenie zamkniƒôte.")

if __name__ == "__main__":
    test_oracle_connection()
